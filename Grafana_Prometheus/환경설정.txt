âœ… 1. Prometheus ê³µì‹ ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜

ğŸ“Œ (1) ìµœì‹  ë²„ì „ í™•ì¸ ë° ë‹¤ìš´ë¡œë“œ
# ìµœì‹  ë²„ì „ í™•ì¸ (ì¶œë ¥ëœ URLì„ í™•ì¸í•˜ì„¸ìš”)
curl -s https://api.github.com/repos/prometheus/prometheus/releases/latest | grep "browser_download_url.*linux-amd64.tar.gz" | cut -d '"' -f 4

# ìµœì‹  ë²„ì „ ë‹¤ìš´ë¡œë“œ (ì˜ˆ: 3.2.1 ë²„ì „)
wget https://github.com/prometheus/prometheus/releases/download/v3.2.1/prometheus-3.2.1.linux-amd64.tar.gz


# ì••ì¶• í•´ì œ
tar xvf prometheus-*.tar.gz

# ì‹¤í–‰ íŒŒì¼ì„ ì´ë™
mv prometheus-*.linux-amd64 /usr/local/prometheus

ğŸ“Œ (2) Prometheus ì‹¤í–‰ íŒŒì¼ ë° ì„¤ì • ë³µì‚¬
# ì‚¬ìš©ì ë° ê·¸ë£¹ ìƒì„±
useradd --no-create-home --shell /bin/false prometheus

# ì‹¤í–‰ íŒŒì¼ ë³µì‚¬
cp prometheus-3.2.1.linux-amd64/prometheus /usr/local/bin/
cp prometheus-3.2.1.linux-amd64/promtool /usr/local/bin/

# ì„¤ì • ë° ë°ì´í„° ë””ë ‰í† ë¦¬ ìƒì„±
mkdir -p /etc/prometheus /var/lib/prometheus
chown -R prometheus:prometheus /var/lib/prometheus

# ì„¤ì • íŒŒì¼ ë³µì‚¬
cp prometheus-3.2.1.linux-amd64/prometheus.yml /etc/prometheus/prometheus.yml

# ê¶Œí•œ ì„¤ì •
chown -R prometheus:prometheus /etc/prometheus

# ì„¤ì • ìˆ˜ì •
vi /etc/prometheus/prometheus.yml
# my global config
global:
  scrape_interval: 15s # Set the scrape interval to every 15 seconds. Default is every 1 minute.
  evaluation_interval: 15s # Evaluate rules every 15 seconds. The default is every 1 minute.
  # scrape_timeout is set to the global default (10s).

# Alertmanager configuration
alerting:
  alertmanagers:
    - static_configs:
        - targets:
          # - alertmanager:9093

# Load rules once and periodically evaluate them according to the global 'evaluation_interval'.
rule_files:
  # - "first_rules.yml"
  # - "second_rules.yml"

# A scrape configuration containing exactly one endpoint to scrape:
# Here it's Prometheus itself.
scrape_configs:
  # The job name is added as a label `job=<job_name>` to any timeseries scraped from this config.
  - job_name: "prometheus"

    # metrics_path defaults to '/metrics'
    # scheme defaults to 'http'.

    static_configs:
      - targets: ["dev.chatbaram.com:9090"] ## íƒ€ê²Ÿ í˜¸ìŠ¤íŠ¸ ì„¤ì •

âœ… 2. Prometheus ì„œë¹„ìŠ¤ ë“±ë¡
cat <<EOF | tee /etc/systemd/system/prometheus.service
[Unit]
Description=Prometheus
Wants=network-online.target
After=network-online.target

[Service]
User=prometheus
Group=prometheus
Type=simple
ExecStart=/usr/local/bin/prometheus \\
  --config.file=/etc/prometheus/prometheus.yml \\
  --storage.tsdb.path=/var/lib/prometheus/ \\
  --web.listen-address="0.0.0.0:9090"

[Install]
WantedBy=multi-user.target
EOF

âœ… 3. Prometheus ì‹¤í–‰ ë° í™•ì¸
# systemd ì„œë¹„ìŠ¤ ì ìš©
systemctl daemon-reload

# Prometheus ì„œë¹„ìŠ¤ ì‹œì‘ ë° ìë™ ì‹¤í–‰ ì„¤ì •
systemctl enable --now prometheus

# ìƒíƒœ í™•ì¸
systemctl status prometheus
âœ… 4. Prometheus ì‹¤í–‰ í™•ì¸
ğŸ“Œ (1) ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸
http://<ì„œë²„_IP or HOST>:9090

----------------------------------------------------
âœ… 1. Node Exporter ì„¤ì¹˜ ë° ì‹¤í–‰
Node ExporterëŠ” Prometheusê°€ ì„œë²„ì˜ í•˜ë“œì›¨ì–´ ë° OS ë©”íŠ¸ë¦­ì„ ìˆ˜ì§‘í•  ìˆ˜ ìˆë„ë¡ í•´ì¤ë‹ˆë‹¤.
ğŸ“Œ (1) Node Exporter ë‹¤ìš´ë¡œë“œ
# ìµœì‹  ë²„ì „ í™•ì¸ (ì¶œë ¥ëœ URL í™•ì¸)
curl -s https://api.github.com/repos/prometheus/node_exporter/releases/latest | grep "browser_download_url.*linux-amd64.tar.gz" | cut -d '"' -f 4


# ì˜ˆ: 1.9.0 ë²„ì „ ë‹¤ìš´ë¡œë“œ (ë²„ì „ í™•ì¸ í›„ ì—…ë°ì´íŠ¸ í•„ìš”)
wget https://github.com/prometheus/node_exporter/releases/download/v1.9.0/node_exporter-1.9.0.linux-amd64.tar.gz

# ì••ì¶• í•´ì œ
tar xvf node_exporter-*.tar.gz

# ì‹¤í–‰ íŒŒì¼ ì´ë™
mv node_exporter-*.linux-amd64 /usr/local/node_exporter
cp /usr/local/node_exporter/node_exporter /usr/local/bin/

ğŸ“Œ (2) Node Exporter ì„œë¹„ìŠ¤ ë“±ë¡
cat <<EOF | tee /etc/systemd/system/node_exporter.service
[Unit]
Description=Node Exporter
After=network.target

[Service]
User=root
ExecStart=/usr/local/bin/node_exporter

[Install]
WantedBy=multi-user.target
EOF
ğŸ“Œ (3) ì„œë¹„ìŠ¤ ì‹¤í–‰ ë° í™•ì¸
# systemd ì„œë¹„ìŠ¤ ì ìš©
systemctl daemon-reload

# Node Exporter ì„œë¹„ìŠ¤ ì‹œì‘ ë° ìë™ ì‹¤í–‰ ì„¤ì •
systemctl enable --now node_exporter

# ìƒíƒœ í™•ì¸
systemctl status node_exporter

### í¬íŠ¸ ë³€ê²½í• ê²½ìš°
[Unit]
Description=Node Exporter
After=network.target

[Service]
User=root
ExecStart=/usr/local/bin/node_exporter --web.listen-address=":9190"

[Install]
WantedBy=multi-user.target


ğŸ“Œ í™•ì¸ ë°©ë²•
Node ExporterëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í¬íŠ¸ 9100ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.
í„°ë¯¸ë„ì—ì„œ í™•ì¸í•˜ë ¤ë©´:
curl http://localhost:9100/metrics
curl http://localhost:9190/metrics

âœ… 2. Prometheusì— Node Exporter ì¶”ê°€
ğŸ“Œ Prometheus ì„¤ì • íŒŒì¼ ìˆ˜ì •
vi /etc/prometheus/prometheus.yml
# Global settings
global:
  scrape_interval: 15s
  evaluation_interval: 15s

# Alertmanager configuration
alerting:
  alertmanagers:
    - static_configs:
        - targets: []

# Load rules
rule_files: []

# Scrape configurations
scrape_configs:
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]

  - job_name: "node_exporter"
    static_configs:
      - targets: ["localhost:9100"]   ## 9190

ğŸ“Œ Prometheus ì„¤ì • ë°˜ì˜
systemctl restart prometheus


-------------------------------------------------------
âœ… 1. Grafana ì„¤ì¹˜
GrafanaëŠ” Prometheus ë°ì´í„°ë¥¼ ë³´ê¸° ì¢‹ê²Œ ëŒ€ì‹œë³´ë“œë¡œ ì‹œê°í™”í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.

ğŸ“Œ (1) Grafana íŒ¨í‚¤ì§€ ì„¤ì¹˜
dnf install -y grafana

ğŸ“Œ ì„¤ì¹˜ í™•ì¸
grafana-server -v

âœ… 2. Grafana ì›¹ UI ì ‘ì† ë° ë¡œê·¸ì¸
ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ Grafana UIì— ì ‘ì†í•©ë‹ˆë‹¤.

â¡ http://<ì„œë²„_IP>:3000

ğŸ“Œ ê¸°ë³¸ ë¡œê·¸ì¸ ì •ë³´

ID: admin
Password: admin (ì²« ë¡œê·¸ì¸ ì‹œ ë³€ê²½ ìš”ì²­)
ë¡œê·¸ì¸ í›„, Data Sourcesì—ì„œ Prometheusë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

âœ… 3. Grafanaì—ì„œ Prometheus ë°ì´í„° ì†ŒìŠ¤ ì¶”ê°€
1ï¸âƒ£ Grafana UI ì ‘ì† (http://<ì„œë²„_IP>:3000)
2ï¸âƒ£ ì™¼ìª½ ë©”ë‰´ì—ì„œ âš™ï¸ ì„¤ì •(Settings) â†’ Data Sources ì„ íƒ (ë©”ë‰´ì— connections ì•ˆì— ìˆë‹¤)
3ï¸âƒ£ Add data source ë²„íŠ¼ í´ë¦­
4ï¸âƒ£ Prometheus ì„ íƒ
5ï¸âƒ£ Prometheus ì„¤ì •

URL: http://localhost:9090
Scrape Interval: 15s
Save & Test ë²„íŠ¼ í´ë¦­ â†’ ì„±ê³µ ë©”ì‹œì§€ í™•ì¸

âœ… 4. Grafanaì—ì„œ Prometheus ëŒ€ì‹œë³´ë“œ ì¶”ê°€
ğŸ“Œ (1) ê¸°ë³¸ Node Exporter ëŒ€ì‹œë³´ë“œ ê°€ì ¸ì˜¤ê¸°
1ï¸âƒ£ Grafana UI (http://<ì„œë²„_IP>:3000)
2ï¸âƒ£ ì™¼ìª½ ë©”ë‰´ì—ì„œ + (Create) â†’ Import í´ë¦­
3ï¸âƒ£ Dashboard ID ì…ë ¥: 1860

https://grafana.com/grafana/dashboards/1860 (Node Exporter ëŒ€ì‹œë³´ë“œ)
4ï¸âƒ£ Prometheus ë°ì´í„° ì†ŒìŠ¤ ì„ íƒ (http://localhost:9090)
5ï¸âƒ£ Import ë²„íŠ¼ í´ë¦­

âœ… 4. ëŒ€ì‹œë³´ë“œ ì„¤ì •
1ï¸âƒ£ Dashboard Title í™•ì¸ (ì˜ˆ: Node Exporter Full)
2ï¸âƒ£ Prometheus ë°ì´í„° ì†ŒìŠ¤ ì„ íƒ

Prometheus ë°ì´í„° ì†ŒìŠ¤ë¥¼ http://localhost:9090ë¡œ ì§€ì •
3ï¸âƒ£ Import ë²„íŠ¼ í´ë¦­
ğŸš€ ëŒ€ì‹œë³´ë“œê°€ ì¶”ê°€ë˜ì—ˆìœ¼ë©´, ì„œë²„ì˜ CPU, ë©”ëª¨ë¦¬, ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ ê·¸ë˜í”„ê°€ í‘œì‹œë©ë‹ˆë‹¤!

---------------------------------------------------------------------------------

ğŸš€ ê²½ë¡œë³„ Python í”„ë¡œì„¸ìŠ¤ ëª¨ë‹ˆí„°ë§
Process ExporterëŠ” Prometheusê°€ íŠ¹ì • í”„ë¡œì„¸ìŠ¤ì˜ CPU ë° ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ìˆ˜ì§‘í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.
âœ… 1. Process Exporter ì„¤ì¹˜
ğŸ“Œ 1. Process Exporter ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜

# ìµœì‹  ë²„ì „ ë‹¤ìš´ë¡œë“œ (ì¶œë ¥ëœ URL í™•ì¸ í›„ ì‹¤í–‰)
curl -s https://api.github.com/repos/ncabatoff/process-exporter/releases/latest | grep "browser_download_url.*linux-amd64.tar.gz" | cut -d '"' -f 4

# ì˜ˆì œ (ë²„ì „ í™•ì¸ í›„ ì‹¤í–‰)
wget https://github.com/ncabatoff/process-exporter/releases/download/v0.7.10/process-exporter-0.7.10.linux-amd64.tar.gz

# ì••ì¶• í•´ì œ
tar xvf process-exporter-*.tar.gz

# ì‹¤í–‰ íŒŒì¼ ì´ë™
mv process-exporter-*.linux-amd64 /usr/local/process-exporter
cp /usr/local/process-exporter/process-exporter /usr/local/bin/

âœ… 2. Process Exporter ì„¤ì • (ê²½ë¡œë³„ Python í”„ë¡œì„¸ìŠ¤ ëª¨ë‹ˆí„°ë§)
ğŸ“Œ 1. ì„¤ì • íŒŒì¼ ìƒì„±
vi /etc/process-exporter.yml
ğŸ“Œ ì•„ë˜ ì„¤ì •ì„ ì¶”ê°€í•˜ì„¸ìš”.
process_names:
  - name: "Chatty_app"      
    cmdline:
      - "python"
      - "/home/chat_bot/Chatty_Project/edu.py"

  - name: "Chatty_edu"      
    cmdline:
      - "python"
      - "/home/chat_bot/Chatty_Project/app.py"

  - name: "KSS_app"       
    cmdline:
      - "python"
      - "/home/KSS_TEST_CHATBOT/app.py"

  - name: "KSS_edu"       
    cmdline:
      - "python"
      - "/home/KSS_TEST_CHATBOT/edu.py"

âœ… 3. Process Exporter ì„œë¹„ìŠ¤ ë“±ë¡
cat <<EOF | tee /etc/systemd/system/process-exporter.service
[Unit]
Description=Process Exporter
Wants=network-online.target
After=network-online.target

[Service]
User=root
ExecStart=/usr/local/bin/process-exporter --config.path /etc/process-exporter.yml --web.listen-address="0.0.0.0:9256"

[Install]
WantedBy=multi-user.target
EOF
âœ… 4. Process Exporter ì‹¤í–‰ ë° í™•ì¸

# ì„œë¹„ìŠ¤ ë“±ë¡ ë° ì‹¤í–‰
systemctl daemon-reload
systemctl enable --now process-exporter
systemctl status process-exporter

curl http://localhost:9256/metrics | grep process_

âœ… 5. Prometheusì—ì„œ Process Exporter ë°ì´í„° ì¶”ê°€
ğŸ“Œ Prometheus ì„¤ì • íŒŒì¼ ìˆ˜ì •
vi /etc/prometheus/prometheus.yml
ğŸ“Œ ì•„ë˜ ë‚´ìš©ì„ scrape_configs í•­ëª©ì— ì¶”ê°€
scrape_configs:
  - job_name: "process_exporter"
    static_configs:
      - targets: ["localhost:9256"]

ğŸ“Œ Prometheus ì¬ì‹œì‘  
systemctl restart prometheus
ğŸ“Œ Prometheus ì›¹ UI (http://<ì„œë²„_IP>:9090/targets)ì—ì„œ process_exporterê°€ UP ìƒíƒœì¸ì§€ í™•ì¸

âœ… 6. Grafanaì—ì„œ ê°œë³„ Python í”„ë¡œì„¸ìŠ¤ ë¦¬ì†ŒìŠ¤ ì‹œê°í™”
ğŸ“Œ Grafanaì—ì„œ Process Exporter ëŒ€ì‹œë³´ë“œ ì¶”ê°€ 1ï¸âƒ£ Grafana ì›¹ UI ì ‘ì† (http://<ì„œë²„_IP>:3000)
2ï¸âƒ£ + â†’ Import í´ë¦­
3ï¸âƒ£ Dashboard ID ì…ë ¥: 22161

Grafana Dashboard 22161 (Process Exporter Monitoring)
4ï¸âƒ£ Prometheus ë°ì´í„° ì†ŒìŠ¤ ì„ íƒ (http://localhost:9090)
5ï¸âƒ£ Import ë²„íŠ¼ í´ë¦­ â†’ edu_main, edu_test, edu_dev ê°œë³„ í”„ë¡œì„¸ìŠ¤ ë¦¬ì†ŒìŠ¤ í™•ì¸ ê°€ëŠ¥!

âœ… 7. íŠ¹ì • Python í”„ë¡œì„¸ìŠ¤ ë¦¬ì†ŒìŠ¤ í™•ì¸ (PromQL ì¿¼ë¦¬)
Prometheus ì›¹ UIì—ì„œ http://<ì„œë²„_IP>:9090 ì ‘ì† í›„ PromQLì„ ì‹¤í–‰í•˜ë©´ íŠ¹ì • Python í”„ë¡œì„¸ìŠ¤ì˜ CPU/ë©”ëª¨ë¦¬ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ğŸ“Œ ê²½ë¡œë³„ Python í”„ë¡œì„¸ìŠ¤ CPU ì‚¬ìš©ëŸ‰
process_cpu_seconds_total{job="process_exporter", name="Chatty_app"}
ğŸ“Œ ê²½ë¡œë³„ Python í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
process_resident_memory_bytes{job="process_exporter", name="Chatty_app"}
ğŸ“Œ ê²½ë¡œë³„ Python í”„ë¡œì„¸ìŠ¤ ì—´ë¦° íŒŒì¼ í•¸ë“¤ ê°œìˆ˜
process_open_fds{job="process_exporter", name="Chatty_app"}

âœ… ë§ˆë¬´ë¦¬
âœ” ê°™ì€ íŒŒì¼ëª…ì„ ê°€ì§„ Python(edu.py) í”„ë¡œì„¸ìŠ¤ë¼ë„ ì‹¤í–‰ ê²½ë¡œë³„ë¡œ ê°œë³„ ëª¨ë‹ˆí„°ë§ ê°€ëŠ¥
âœ” Prometheusì—ì„œ íŠ¹ì • Python í”„ë¡œì„¸ìŠ¤ ë¦¬ì†ŒìŠ¤ ìˆ˜ì§‘ í›„ Grafanaì—ì„œ ì‹œê°í™” ê°€ëŠ¥
âœ” PromQLì„ ì‚¬ìš©í•˜ì—¬ íŠ¹ì • í”„ë¡œì„¸ìŠ¤ì˜ CPU, ë©”ëª¨ë¦¬, íŒŒì¼ í•¸ë“¤ ëª¨ë‹ˆí„°ë§ ê°€ëŠ¥


---------------------------------------------------------------------------
âœ… Alertmanager & Webhook ì„¤ì¹˜ ë° ì„¤ì • ê°€ì´ë“œ
í˜„ì¬ Prometheusì˜ Alertmanagerë¥¼ ì„¤ì¹˜í•˜ì—¬ ì„œë²„ ë° í”„ë¡œì„¸ìŠ¤ ë¦¬ì†ŒìŠ¤ ì„ê³„ê°’ ì´ˆê³¼ ì‹œ ì•Œë¦¼ì„ ë³´ë‚´ê³ , Webhookì„ í†µí•´ íŠ¹ì • ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬ì¶•í•˜ë ¤ í•©ë‹ˆë‹¤.
ğŸš€ 1. Alertmanager ì„¤ì¹˜
ğŸ“Œ 1ï¸âƒ£ Alertmanager ë°”ì´ë„ˆë¦¬ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜
mkdir -p /usr/local/alertmanager
cd /usr/local/alertmanager

# ìµœì‹  ë²„ì „ í™•ì¸ í›„ ë‹¤ìš´ë¡œë“œ
ALERTMANAGER_VERSION=$(curl -s https://api.github.com/repos/prometheus/alertmanager/releases/latest | grep tag_name | cut -d '"' -f 4)
wget https://github.com/prometheus/alertmanager/releases/download/v0.28.0/alertmanager-0.28.0.linux-amd64.tar.gz

# ì••ì¶• í•´ì œ ë° ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
tar xvf alertmanager-0.28.0.linux-amd64.tar.gz
mv alertmanager-0.28.0.linux-amd64/alertmanager /usr/local/bin/
mv alertmanager-0.28.0.linux-amd64/amtool /usr/local/bin/

ğŸ“Œ 2ï¸âƒ£ Alertmanager ì„¤ì • íŒŒì¼ ìƒì„±
mkdir -p /etc/alertmanager
vi /etc/alertmanager/alertmanager.yml

ğŸ“Œ Alertmanager ê¸°ë³¸ ì„¤ì • ì˜ˆì œ 
route:
  receiver: "sms_alert"

receivers:
  - name: "sms_alert"
    command: "/opt/send_sms.sh {{ .CommonAnnotations.summary }} {{ .Labels.instance }} {{ .Value }}"



ğŸ“Œ 3ï¸âƒ£ Alertmanager ì„œë¹„ìŠ¤ ë“±ë¡
cat <<EOF | tee /etc/systemd/system/alertmanager.service
[Unit]
Description=Prometheus Alertmanager
After=network.target

[Service]
ExecStart=/usr/local/bin/alertmanager --config.file=/etc/alertmanager/alertmanager.yml --cluster.listen-address=""
Restart=always
User=root

[Install]
WantedBy=multi-user.target
EOF

ğŸ“Œ 4ï¸âƒ£ Alertmanager ì‹¤í–‰ ë° ìƒíƒœ í™•ì¸
systemctl daemon-reload
systemctl enable --now alertmanager
systemctl status alertmanager

ğŸ“Œ 5ï¸âƒ£ Alertmanagerê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸
curl http://localhost:9093/api/v1/status
âœ… ì •ìƒ ì‹¤í–‰ ì‹œ JSON ì‘ë‹µ í™•ì¸ ê°€ëŠ¥!

ğŸš€ 2. Prometheusì— Alertmanager ì—°ë™
ğŸ“Œ 1ï¸âƒ£ Prometheus ì„¤ì • íŒŒì¼ (prometheus.yml) ìˆ˜ì •
vi /etc/prometheus/prometheus.yml
ğŸ“Œ ì•„ë˜ ë‚´ìš©ì„ ì¶”ê°€
rule_files:
  - /etc/prometheus/alert-rules.yml

alerting:
  alertmanagers:
    - static_configs:
        - targets: ["localhost:9093"]

ğŸ“Œ 2ï¸âƒ£ Prometheus ì¬ì‹œì‘
systemctl restart prometheus
ğŸ“Œ 3ï¸âƒ£ Alert Rule ì„¤ì • íŒŒì¼ (/etc/prometheus/alert-rules.yml) ìƒì„±
groups:
  - name: system_alerts
    rules:
      - alert: HighCPUUsage
        expr: 100 - (avg by (instance) (rate(node_cpu_seconds_total{mode="idle"}[5m])) * 100) > 80
        for: 1m
        labels:
          severity: critical
        annotations:
          summary: "High CPU Usage"
          description: "CPU usage exceeded 80% for 1 minute."
      
      - alert: HighMemoryUsage
        expr: (node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes) / node_memory_MemTotal_bytes * 100 > 85
        for: 2m
        labels:
          severity: warning
        annotations:
          summary: "High Memory Usage"
          description: "Memory usage exceeded 85% for 2 minutes."

      - alert: DiskUsageHigh
        expr: (node_filesystem_avail_bytes{mountpoint="/"} / node_filesystem_size_bytes{mountpoint="/"}) * 100 < 20
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "Disk Space Low"
          description: "Disk usage is above 80%. Consider clearing space."

      - alert: ProcessNotRunning
        expr: namedprocess_namegroup_num_procs == 0
        for: 30s
        labels:
          severity: critical
        annotations:
          summary: "Process Down"
          description: "Process {{ $labels.groupname }} is not running!"



ğŸ“Œ 4ï¸âƒ£ Prometheus ì¬ì‹œì‘í•˜ì—¬ Alert Rule ì ìš©
systemctl restart prometheus






âœ… 1ë‹¨ê³„: í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
ë¨¼ì € prometheus-clientì™€ prometheus-fastapi-instrumentator íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í–ˆëŠ”ì§€ í™•ì¸í•˜ê³ , ì„¤ì¹˜ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì‹¤í–‰í•˜ì„¸ìš”.
pip install prometheus-client prometheus-fastapi-instrumentator

